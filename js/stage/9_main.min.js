$(function(){function n(n,t){console.log("Particle Spawned!");var o=new PIXI.Sprite(W[0]);return o.interactive=o.buttonMode=!1,o.anchor.x=o.anchor.y=.5,o.position.x=n,o.position.y=t,o.ticks=0,o.limit=0+4*Math.random()-1|0,o.subImg=0,o.removed=!1,o.g=.02*Math.random(),o.v={x:w.randomFlip(.8),y:0},o.tick=function(){this.ticks++,this.ticks>this.limit&&(this.ticks=0,this.texture=W[this.subImg++%W.length]),this.rotation+=.001,this.subImg>=W.length&&this.kill(),this.move()},o.move=function(){this.v.y+=this.g,this.x+=this.v.x,this.y+=this.v.y},o.kill=function(){this.removed=!0},o}function t(t,o,i,e){if(window.running){if(!t||!o){var a=$("#lamp");if(a)try{for(var c=l?40:100,u=0;c>u;u++)if(t=a.position().left+Math.random()*a.width(),o=a.position().top+Math.random()*a.height(),P.contains(t,o)){o+=a.height()/4,console.log("Inside Polygon ["+t+"]["+o+"]! "+u+" attempts.");break}}catch(h){return window.running=!0,r(),void console.log(h)}}if(x){var d=new n(t,o),f=i||1;e&&(f+=Math.random()*(e-i)|0,0>f&&(f=-f)),d.scale.x=d.scale.y=f||1,B.push(d),U.addChild(d)}else s(t,o,i,e)}}function o(){t(null,null,1,2),x&&t(null,null,3,4)}function i(){if(b+=.33,l&&(b+=.33),x&&!l)for(var n=0;b/3>n;n++)t();x,o(),b>4&&!G&&(G=!0,setTimeout(r,2e3))}function e(){function n(){i(n)}function i(n){var i=$("#lamp");h+=u;var e=c+h,r=a;e>r&&(e=r-(e-r),1>d?(b+=h/(20*(3*d+1)),o(),o(),o()):(b-=h/(15*(1*d+1)),o()),t(),h=-(h/1.8),d++),i.css({top:e}),c=e,v>d?setTimeout(n,f*u):i.css({top:a})}var e=$("#lamp"),a=y.y,r=1.2*-e.height();e.css("top",r-200);var s=r,c=s,u=l?.4:.25,h=2,d=0,v=4;n()}function a(){function n(){i(n)}function t(){o(t)}function o(n){I++;for(var t=[],o=0;o<B.length;o++){var i=B[o];i.removed?U.removeChild(i):(i.tick(),t.push(i))}B=t,F.render(R),window.running&&setTimeout(n,p)}function i(n){g++;var t=$("#lamp");if(t){if(b>0){var o=Math.sin(g++/(5*m))*b*2;t.rotate(o)}b*=.99,.2>b&&(b=.2)}window.running&&setTimeout(n,f)}n(),console.log("Rendering Started!"),x&&(t(),console.log("Ticking Started!"))}function r(){if(z)return!1;z=!0;var n=3e3,t=$("#video_container"),o=$("#video_id");t.fadeIn(n,function(){window.running=!1;try{l||o[0].player.play()}catch(n){console.log(n)}}),$("#lamp").animate({opacity:0},n,function(){$(this).remove()}),x&&$(M).animate({opacity:0},n,function(){$(this).remove()})}function s(n,t){console.log("Spawning Jquery Particles");var o=$("<img>").attr({src:"img/"+A[K++%A.length]+".gif"});o.addClass("trail");var i=n-o.width()/2,e=t+2*o.height()+10,a=1e3,r=i+(6*Math.random()-3)*(a>>7),s=e+6*Math.random()*(a>>7),c={opacity:0,left:r,top:s};$(document.body).append(o),o.css({position:"absolute",left:i,top:e}).animate(c,a,function(){$(this).remove()})}var c=(~"localhost".indexOf(document.URL),"localhost".indexOf(document.URL));c=!1,console&&c||(console={log:function(){}});var l=!0;WURFL&&"Desktop"===WURFL.form_factor&&(l=!1);var u=960,h=window.innerHeight,d=20,f=1e3/d,v=25,p=1e3/v,g=0,m=1;window.running=!0;var y={x:70,y:200},w={isCanvasSupported:function(){var n=document.createElement("canvas");return!(!n.getContext||!n.getContext("2d"))},movePolygon:function(n,t,o){if(!(n.length<2))for(var i=0;i<n.length;i+=2)n[i]+=t,n[i+1]+=o},drawPolygon:function(n,t){if(!(t.length<2)){var o=n,i=0;for(o.moveTo(t[i++],t[i++]);i<t.length-1;)o.lineTo(t[i++],t[i++]);o.endFill()}},distance:function(n,t){var o=t.x-n.x,i=t.y-n.y;return Math.sqrt(o*o+i*i)},randomFlip:function(n){return n=Math.abs(n),2*Math.random()*n-n}},x=w.isCanvasSupported();w.isCanvasSupported=function(){return x},$("#lamp").rotate(0);var I=0,k=$("#container"),b=($("#lamp"),0),C=[0,100,420,0,740,50,750,250,510,350,300,350,0,160],P={data:C,points:function(){for(var n=[],t=0,o=C.length;o>t;t+=2)n.push({x:C[t],y:C[t+1]});return n}(),contains:function(n,t){for(var o=!1,i=0,e=this.points.length-1;i<this.points.length;e=i++){var a=this.points[i].x,r=this.points[i].y,s=this.points[e].x,c=this.points[e].y,l=r>t!=c>t&&(s-a)*(t-r)/(c-r)+a>n;l&&(o=!o)}return o}};if(x){var M,X=u||window.innerWidth,S=h||window.innerHeight,T="canvasContainer";M=document.createElement("canvas"),$("#"+T).append(M),M&&"object"==typeof M||(console.log("Canvas not available, using no canvas fallback."),w.isCanvasSupported=function(){return!1});var R=new PIXI.Stage(546),F=PIXI.autoDetectRenderer(X,S,M,!0);if(F.view.style.position="absolute",F.view.style.top="0px",F.view.style.left="0px",c){var _=new PIXI.Graphics;_.beginFill(60928,.1),w.movePolygon(C,y.x,y.y),w.drawPolygon(_,C),R.addChild(_)}var Y=l?6:12,E=0,L=!0,U=new PIXI.SpriteBatch;R.addChild(U);for(var O=PIXI.Texture.fromImage("img/sparkle_sheet.png"),W=[],j=32,q=32,D=0;8>D;D++)for(var H=0;4>H;H++)W.push(new PIXI.Texture(O,new PIXI.Rectangle(D*j,H*q,j,q)));var B=[]}var G=!1;k.on("click",function(){return i(),!1}),e(),a();var J=!0;!function(){function n(){J&&t.fadeIn(o,function(){t.fadeOut(o,n)})}var t=$("#glow"),o=1e3;t&&n()}();var z=!1,A=["twinkle","gcspinny","sparkles29jc","sparkle"],K=0;!function(){function t(n){if(a){var t={x:n.pageX,y:n.pageY},o=w.distance(t,a);o>u/4&&(i(),a=t)}else a={x:n.pageX,y:n.pageY}}function o(o){if(window.running){t(o);var i={x:o.pageX,y:o.pageY};if(E++,Y>E)return!1;if(E=0,L)for(var e=0;d>e;e++){var a=new n(i.x+5*e,i.y);a.v.x+=.15*e,a.v.y+=.2,a.scale.x=a.scale.y=l?2:1,B.push(a),U.addChild(a)}return!1}}function e(n){if(window.running&&(t(n),s++,!(r>s))){s=0;var o=$("<img>").attr({src:"img/"+A[K++%A.length]+".gif"});o.addClass("trail");var i=n.pageX-o.width()/2,e=n.pageY-o.height()/2,a=1e3,c=i+(6*Math.random()-3)*(a>>7),l=e+6*Math.random()*(a>>7),u={opacity:0,left:c,top:l};return $(document.body).append(o),o.css({position:"absolute",left:i,top:e}).animate(u,a,function(){$(this).remove()}),!1}}var a,r=10,s=0,c=2,h=1,d=l?h:c;$(document).mousemove(function(n){return x?o(n):e(n),!1});try{$(document).on("touchmove",function(n){var t=n.originalEvent.touches[0]||n.originalEvent.changedTouches[0];return x?o(t):e(t),!1})}catch(f){console.log(f)}}();try{$(document).mousemove(function(n){running?$("#hand_id").offset({left:n.pageX,top:n.pageY}):$("#hand_id").hide()})}catch(N){console.log(N)}});